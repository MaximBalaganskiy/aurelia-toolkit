<template>
	<require from="./settings-editor.scss"></require>
	<ul>
		<li repeat.for="s of settings">
			<div class="object" if.bind="s.isObject">
				<div class="header">
					<h6 class="primary-text" click.delegate="s.toggleExpanded()">${s.info.name}</h6>
					<div class="divider"></div>
				</div>
				<div class="body ${s.isExpanded ? 'expanded' : ''}" ref="s.body">
					<settings-editor object.bind="s.value" key.bind="s.key" info.bind="s.info" ref="s.editor"></settings-editor>
				</div>
			</div>
			<div class="field ${s.info.clientEditor === ClientEditor.Textarea ? 'textarea' : ''}" if.bind="!s.isObject">
				<span class="key" title="${s.info.description}">${s.info.name}</span>
				<div class="value">
					<variant-viewer if.bind="!s.isEdited" value.bind="s.value" data-type.bind="s.info.clientEditor" edit.delegate="edit(s)" change.delegate="save(s)"></variant-viewer>
					<div if.bind="s.isEdited" class="editor">
						<tw-progress size="small" if.bind="s.isSaving"></tw-progress>
						<variant-editor value.bind="s.value" data-type.bind="s.info.clientEditor"></variant-editor>
						<button md-button="flat: true;" class="success-text" click.delegate="save(s)"><i class="material-icons">done</i></button>
						<button md-button="flat: true;" class="error-text" click.delegate="cancel(s)"><i class="material-icons">clear</i></button>
					</div>
				</div>
			</div>
		</li>
	</ul>
</template>